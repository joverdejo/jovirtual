(this.webpackJsonpjovirtual=this.webpackJsonpjovirtual||[]).push([[0],{11:function(e,t,n){},12:function(e,t,n){},13:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),u=n(6),o=n.n(u),s=(n(11),n(12),n(13),n(3)),a=n(2);var i=function(){var e=Object(r.useRef)(null),t=Object(r.useRef)(null),n=Object(r.useRef)(null),c=Object(r.useRef)(null),u=Object(r.useRef)(null),o=Object(r.useRef)(null),i=Object(r.useRef)(null),l=Object(r.useRef)(null),h=Object(r.useRef)(0),b=Object(r.useRef)(0),d=Object(r.useRef)([100,200,150,250,400,400,300,100]),j={0:[53],1:[54],2:[55],3:[56],4:[57],5:[58],6:[59],7:[60],8:[61],9:[62],A:[63],B:[64],C:[65],D:[66],E:[67],F:[68]},f=new s.b(1500,"lowpass"),p=new s.f({decay:10,wet:.3}),g=new s.a("8n",.7),m=Object(r.useRef)(new s.g({volume:-10,urls:{A1:"A1.mp3",A2:"A2.mp3"},baseUrl:"https://tonejs.github.io/audio/casio/"}).chain(f,p,g,s.e));function w(){fetch("https://jovirtual.herokuapp.com/jovirtual/coords",{method:"POST",body:JSON.stringify({x:n.current,y:c.current,userId:c.current}),headers:{mode:"no-cors","Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.ok?e.json():Promise.reject(e)})).then((function(e){!function(e,t){for(var n in e)n!=t&&m.current.triggerAttackRelease((e[n].x+e[n].y)%500,.9)}(e,12345),console.log(e)})).catch((function(e){console.warn("Something went wrong.",e)}))}Object(r.useRef)(new s.g({volume:-10,urls:{A1:"A1.mp3",A2:"A2.mp3"},baseUrl:"https://tonejs.github.io/audio/salamander/"}).toDestination());var v=function(e){!function(){for(var e in d.current=[],b.current="2369FE90",console.log("making melody"),b.current)d.current.push(s.c(j[b.current[e]],"midi").toFrequency())}(),h.current=(h.current+1)%8,o.current=1-c.current/window.innerHeight,u.current=n.current/window.innerWidth;var t=i.current;i.current=.9*Math.abs((i.current+l.current)/150)>1?1:.9*Math.abs((i.current+l.current)/150),w(),i.current=.95*t+i.current*(1-.95),console.log(i.current),g.set({wet:(g.wet.value+i.current)/2}),f.set({frequency:15e3*Math.pow(o.current,2)+400});for(var r=parseInt(256*u.current).toString(2);r.length<8;)r="0"+r;console.log(r),"1"===r[h.current]&&m.current.triggerAttackRelease(d.current[h.current],.9)},O=function(r){null!=r.touches?(c.current=Math.abs(r.touches[0].clientY),n.current=Math.abs(r.touches[0].clientX)):(c.current=Math.abs(r.clientY),n.current=Math.abs(r.clientX)),null==n.current&&(n.current=440),null==c.current&&(c.current=440),e.current.style.boxShadow="inset 0 0 30px #000000",null==t.current&&(t.current=new s.d(v,"16n")),t.current.start(0),s.h.bpm.value=120,s.i(),s.h.start()},M=function(e,t){return Math.abs(t-Math.abs(t-e%(2*t)))},x=function(e){null!=e.touches?(l.current=Math.abs(e.touches[0].clientY)-c.current,c.current=Math.abs(e.touches[0].clientY),n.current=Math.abs(e.touches[0].clientX)):(l.current=Math.abs(e.clientY)-c.current,c.current=parseInt(Math.abs(e.clientY)),n.current=parseInt(Math.abs(e.clientX)));var t=M(n.current,255),r=M(c.current,255);document.body.style.backgroundColor="rgb(".concat(t,", ").concat(r,", 100)")},y=function(){e.current.style.boxShadow="inset 0 0 20px #000000",null==t.current||t.current.stop(),s.h.stop()};return Object(a.jsx)("div",{children:Object(a.jsx)("div",{id:"pad",ref:e,onTouchStart:O,onTouchMove:x,onTouchEnd:y,onMouseDown:O,onMouseMove:x,onMouseUp:y,className:"app"})})};var l=function(){return Object(a.jsxs)("div",{className:"App-body",children:[Object(a.jsxs)("div",{id:"welcome",className:"welcome",children:[Object(a.jsx)("h1",{children:"welcome to jovirtual"}),Object(a.jsx)("p",{children:"press and hold anywhere to create"}),Object(a.jsx)("p",{children:"(if on mobile, make sure ringer is on)"})]}),Object(a.jsx)(i,{})]})},h=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,25)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,u=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),u(e),o(e)}))};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(l,{})}),document.getElementById("root")),h()}},[[24,1,2]]]);
//# sourceMappingURL=main.cda27c4d.chunk.js.map